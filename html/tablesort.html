<!-- 
    Not a part of the project: just me futzing about regarding sorting tables
-->
<!DOCTYPE html>
<html>
<head> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Select Customer</title>
  <meta name="description" content="description"/>
  <meta name="author" content="author" />
  <meta name="keywords" content="keywords" />
  <link rel="stylesheet" href="./stylesheet.css" type="text/css" />
  <style type="text/css">.body { width: auto; }</style>
</head>
<body style="font-size: 20px;">
  <table id="empTable">
      <tr>
        <th id="emailHeader">Email</th>
        <th id="nameHeader">Name</th>
        <th id="titleHeader">Title</th>
        <th id="dateHeader">Date</th>
      </tr>
      <tr>
        <td>manders@d.com</td>
        <td>Maria Anders</td>
        <td>Germany</td>
        <td>2022-07-25</td>
      </tr>
      <tr>
        <td>fchang@c.com</td>
        <td>Francisco Chang</td>
        <td>Mexico</td>
        <td>2022-07-24</td>
      </tr>
      <tr>
        <td>wwords@b.com</td>
        <td>William Wordsworth</td>
        <td>United Kingdom</td>
        <td>2022-07-26</td>
      </tr>
      <tr>
        <td>rschmidt@a.com</td>
        <td>Rita Schmidt</td>
        <td>United States</td>
        <td>2022-07-23</td>
      </tr>
      <tr>
        <td>fredflintstone@dinosaur.com</td>
        <td>Fred Flintstone</td>
        <td>United Arab Emirates</td>
        <td>2022-07-21</td>
        <td></td>>
      </tr>
      <tr>
        <td>bulbabulba@grasstypes.com</td>
        <td>Bul Ba Saur</td>
        <td>Pallet Town</td>
        <td>2022-07-22</td>
        <td></td>>
      </tr>
    </table>

    <button id="fNameBtn" onclick="sortTable('fname')">By First Name</button>
    <button id="lNameBtn" onclick="sortTable('lname')">By Last Name</button>
    <button id="emailBtn" onclick="sortTable('email')">By Email</button>
    <button id="dateBtn" onclick="sortTable('date')">By Date</button>

    <div id = "test">No.</div>

    <script>

      document.getElementById("nameHeader")
              .addEventListener("click", 
                function(){
                    sortTable("lname");
                });

      document.getElementById("emailHeader")
              .addEventListener("click",            
                function(){
                    sortTable("email")
                });

      document.getElementById("dateHeader")
              .addEventListener("click",            
                function(){
                    sortTable("date")
                });
  
    // Returns an array of names
      function nameSplit(d) {
        var p = d.split(" ");
        return p;
      }

      function sortTable(colHeader){
        var table = document.getElementById("empTable");
        var rows = table.rows;

        // Set ColIndex and compFunc depending on Col Header
        var colIndex;
        var compFunc = (x, y) => {
                return (x.toLowerCase() > y.toLowerCase());
            };

        switch(colHeader){
          case "fname":
            colIndex = 1;
            break;
          case "lname":
            colIndex = 1;
            break;
          case "email":
            colIndex = 0;
            break;
          case "date":
            colIndex = 3;
            compFunc = (x, y) => {
              return (x.toLowerCase() < y.toLowerCase());
            };
            break;

          default:    // Error
            colIndex = -1;
        }
  
        // Taken from W3 Schools https://www.w3schools.com/howto/howto_js_sort_table.asp
        var switching = true;
        /* Make a loop that will continue until
        no switching has been done: */

        alert(table.rows[1].getElementsByTagName("TD")[colIndex].innerHTML);
        while (switching) {
          // Start by saying: no switching is done:
          switching = false;
          rows = table.rows;

          var i;
          /* Loop through all table rows (except the
          first, which contains table headers): */
          for (i = 1; i < (rows.length - 1); i++) {
            // Start by saying there should be no switching:
            shouldSwitch = false;
            /* Get the two elements you want to compare,
            one from current row and one from the next: */
            var x = rows[i].getElementsByTagName("TD")[colIndex].innerHTML;
            var y = rows[i + 1].getElementsByTagName("TD")[colIndex].innerHTML;

            // Check if the two rows should switch place:
            if (compFunc(x, y)) {
              // If so, mark as a switch and break the loop:
              shouldSwitch = true;
              break;
            }
          }
          if (shouldSwitch) {
            /* If a switch has been marked, make the switch
            and mark that a switch has been done: */
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
          }
        }
      }

      document.get("test").innerHTML="Yes!";
  
    </script>
</body>
</html>